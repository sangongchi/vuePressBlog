---
title: Vue组件传值的几种方式
date: 2018-09-09
tag:
  - vue
categories:
  - Vue
---

### 1.父子组件传值

1. 父传子

   - 在子组件中 使用 props，创建一个属性用来接收父组件传过来的值

   - 父组件中注册子组件

   - 在子组件的标签中 添加使用子组件中创建的 props 中的属性

   - 把需要传给子组件的值赋值给该属性，使用 v-bind 绑定自定义的属性，并赋值

   - ![1563248942257](H:\biji\typora_imgs\1563248942257.png)子组件

   - ![1563248999594](H:\biji\typora_imgs\1563248999594.png)父组件，使用 v-bind 绑定

2. 子传父

   - 在子组件中定义一种方式来触发一个自定义事件

     - ​ ==<button @click="sendMessageToParent">向父组件传值</button>==

       ​ ==<button @click="changeText">修改父组件中的值</button>==

   - 将需要的值作为\$emit 的第二个参数，该值作为实参传给响应自定义事件的方法

     - ![1563256431216](H:\biji\typora_imgs\1563256431216.png)

   - 在父组件中注册子组件，并在组件标签中绑定自定义事件的监听。

     - ![1563256528909](H:\biji\typora_imgs\1563256528909.png)

### 2.组件之间的传值

---

- 使用 eventBus 传值

  1. 首先创建一个 bus.js

     ![1563257647143](H:\biji\typora_imgs\1563257647143.png)

  2. 在要通讯的组件中 引入 bus.js

     ==import Bus from '../common/bus'==

  3. 输出值的组件中定义事件触发方法

     定义方法

     ==methods:{==

     ​ ==toBus(){==

     ​ ==Bus.\$emit('on','来自兄弟组件的值，使用 bus 传输')==

     ​ ==}==

     ​ ==}==

  4. 在接收一方监听

     ​ ==mounted(){==

     ​ ==Bus.\$on('on',(m)=>{==

     ​ ==this.msg3=m==

     ​ ==})==

     ​ ==}==

### 3.高级组件通讯 provide / inject(并非响应式的)

---

1. `provide` 和 `inject` 主要为高阶插件/组件库提供用例。并不推荐直接用于应用程序代码中。

2. provider/inject：简单的来说就是在父组件中通过 provider 来提供变量，然后在子组件中通过 inject 来注入变量。

   以上两者可以在父组件与子组件、孙子组件、曾孙子...组件数据交互，也就是说不仅限于 prop 的父子组件数据交互，只要在上一层级的声明的 provide，那么下一层级无论多深都能够通过 inject 来访问到 provide 的数据

3. `provide` 选项应该是一个对象或返回一个对象的函数。该对象包含可注入其子孙的属性。在该对象中你可以使用 ES2015 Symbols 作为 key，但是只在原生支持 `Symbol` 和 `Reflect.ownKeys` 的环境下可工作。

   `inject` 选项应该是：

   - 一个字符串数组，或
   - 一个对象，对象的 key 是本地的绑定名，value 是：
     - 在可用的注入内容中搜索用的 key (字符串或 Symbol)，或
     - 一个对象，该对象的：
       - `from` 属性是在可用的注入内容中搜索用的 key (字符串或 Symbol)
       - `default` 属性是降级情况下使用的 value
